# ROS имена, пространства имен, мапирование

Данная тема определяет важные аспекты, связанные с организацией системы при работе с узлами и топиками. Относительно данной темы можно сослаться на офф страницу о [именах](http://wiki.ros.org/Names), а также к странице о [мапировании](http://wiki.ros.org/Remapping%20Arguments).

## Node name

Для начала определим, что __имя узла__ - это имя, которое присваивается узлу при его запуске. Ранее уже было произведено переопределение имени узла аргументом `__name` в команде
```bash
rosrun rospy_tutorials listener __name:=listener
```

Задание имени было сделано специально, так как по-умолчанию данный узел создается __анонимным__, что добавляет к его имени `listener` случайный численный суффикс (например получается `listener_18231_12354`). именно поэтому мы явно и задали его имя.

> Попробуйте запустить узел без явного указания имени и посмотреть список активных узлов (обратите внимание на их имена)

Таким образом, имя узла в системе без явного задания равно имени узла в пакете, со свойством __анонимности__ к имени узла добавляется суффикс, который делает узел уникальным в системе (больше такого имени ни у кого не будет). Можно явно задать новое имя с помощью аргумента `__name`.

## Node namespace

__Пространство имен__ - фактически, это префикс имени узла в системе. Концептуально, пространство имен объединяет несколько узлов по определенной задаче, расположению или другому признаку. Задавая пространство `new_ns` узлу `talker`, мы получаем узел в системе `/new_ns/talker` и топик `/new_ns/chatter`.

Задание пространства имен для узла производится аргументом `__ns`. Также можно задать глобальное простанство имен с помощью переменной окружения `ROS_NAMESPACE`. По-умолчанию глобальное пространство имен `/`.

> Немного напоминает файловую систему в Unix системах =)

> Попробуйте запустить узел `talker` с указание аргумента `__ns:=my_ns`, оцените масштаб бедствия утилитами `rosnode` и `rostopic`.

> После попробуйте запустить узел `listener` без явного задания пространства имен. Обратите внимание, что расположение в разных пространствах имен не позволяет подключиться узлу `listener` к узлу `talker` по топику `chatter`, что видно по отсутствию вывода в терминале узла `listener`.

Получается, простанство имен может объединять узлы (и, как следствие, их топики).

## Node remapping

__Мапирование__ - переназначение имени топика. Часто используется для соединения узлов, которые в названии топиков имеют общие имена.

Так, например, узел драйвера камеры имеет топик `cam_image`, в свою очередь узел-обработчик `processor` и пакет `my_pkg` (пример абстрактный - не существует) изображения имеет топики `input_img` и `output_img`. Такие имена были заданы разработчиком. При этом, мапирование позволяет легко соединить эти два узла.

Запуск обработчика происходит следующим образом
```bash
rosrun my_pkg processor input_img:=cam_image
```

> Попробуйте запустить `talker` смапировав топик `chatter` к названию `my_chat`. Оцените результат утилитой `rostopic`.

Вот и научились менять имена топиков узла, даже если они названы по-другому =)

## В результате

- Мы научились таким аспектам организации, как имена узлов, пространства имен и мапирование топиков.
- Все рассмотренные вещи будут активно использоваться для корректной организации экосистемы на машине или в сети.