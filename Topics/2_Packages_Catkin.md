# ROS пакеты

Вся экосистема ROS основывается на концепции пакетов, которые включают различные компоненты. В этом топике мы знакомимся с возможностями создания пакетов, их редактирования, а также инструментом сборки, который будет использоваться далее. Можно также подглядеть на [офф страницу =)](http://wiki.ros.org/ROS/Tutorials/CreatingPackage).

> Убедитесь, что ваша среда настроена, ваш ws инициализирован и виден системе ROS.

Для начала перейдем в наш ws, в директорию `src`
```bash
cd ~/catkin_ws/src
```

После создадим пакет командой 
```bash
catkin_create_pkg [pkg_name] [dep1 dep2 ...]
```

В данной команде первым аргументом передается имя нового пакета, после перечисляются зависимости данного пакета.
Для начала создадим пакет и добавим поддержку библиотек python и cpp (c++)
```bash
catkin_create_pkg study_pkg rospy roscpp
```

Далее наблюдаем созданную папку и два главных файла внутри: `CMakeLists.txt` и `package.xml`  

В содержании `package.xml` можно выделить основные блоки:  

Заголовок, в нем содержится основная инфа о пакете
```xml
<?xml version="1.0"?>
<package format="2">
  <name>study_pkg</name>
  <version>0.0.0</version>
  <description>The study_pkg package</description>
  <maintainer email="user@todo.todo">user</maintainer>
  <license>TODO</license>
```

Зависимости (инструмент сборки, сборка, экспорт, runtime (exec) - выполнение)
```xml
  <buildtool_depend>catkin</buildtool_depend>
  <build_depend>roscpp</build_depend>
  <build_depend>rospy</build_depend>
  <build_export_depend>roscpp</build_export_depend>
  <build_export_depend>rospy</build_export_depend>
  <exec_depend>roscpp</exec_depend>
  <exec_depend>rospy</exec_depend>
```

Остальное можно также наблюдать внутри комметариев формата xml. Там также приведены некоторые описания строк и блоков.

Внутри `CMakeLists.txt` можно также видеть много закомментированных блоков, но в-основном можно вытащить базовые куси на момент инициализации:  

Определение минимальной версии сборки `cmake` и название проекта
```cmake
cmake_minimum_required(VERSION 2.8.3)
project(study_pkg)
```

Поиск и подключение зависимостей
```cmake
find_package(catkin REQUIRED COMPONENTS
  roscpp
  rospy
)
```

Также создаются базовые папки `include` (для заголовочных файлов) и `src` (для файлов исходных текстов).  

## В результате

- С помощью инструмента из набора `catkin` был создан первый пакет ROS и поверхностно рассмотрены файл системы сборки `cmake` - `CMakeLists.txt` и файл описания пакета `package.xml` в формате `xml`.
- Файл `CMakeLists.txt` будет далее основным файлом для редактирования и использования, так как именно он укзаывает необходимые зависимости и правила для сборки пакета; в свою очередь `package.xml` является скорее описание пакета и требует пристального внимания при оформлении внешнего вида, что также очень важно.
- Полученный пакет будет использован в качестве основы для дальнейшего обучения, рассмотрения и тестов ROS.
- Если говорить об использовании `git`, то рекомендуется размещать в репозитории именно содержимое самого пакета, таким образом репозиторий будет представлять из себя пакет ROS, что в результате позволит легко импортировать пакет в ws на других машинах; размещение в `git` всего ws является плохой практикой и не рекомендуется к использованию.