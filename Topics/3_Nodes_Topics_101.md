# ROS узлы и топики (основное)

Вот и подошел черед познакомиться с первыми базовыми вещами ROS - __узлами__. Под узлом подразумевается программа, которая производит некоторые действия. Узлы соединяются __топиками__, через которые передают __сообщения__. Таким образом, приходим к знакомой схеме типа графа.  

Для начала знакомства необходимо запомнить важную вещь!  
> В любой экосистеме ROS существует мастер (и он единственный), который выполняет работу по оповещению узлов о том, что кто-то подключается к каналу, а также о том, какие каналы существуют, чтобы организовать подключение.  

Для более подробного описания предлагается поглядеть на офф страницы об [узлах](http://wiki.ros.org/Nodes) и [топиках](http://wiki.ros.org/Topics) =)

Чтобы не копаться в теории - попробует запустить узел (пока не пишем программу, а только пробуем готовые и знакомимся с инструментами).

> Для работы с данной темой необходимо запустить в отдельных терминалах:
- мастера командой   
`roscore`
- узел из пакета `rospy_tutorials` с именем `talker` командой  
`rosrun rospy_tutorials talker __name:=talker`
- узел из пакета `rospy_tutorials` с именем `listener` командой  
`rosrun rospy_tutorials listener __name:=listener`

> Прим. небольшое разъяснение используемых команд:
- roscore - запуск ROS мастера, вся систем зиждется на нем и без него ничего не работает =)
- rosrun - запуск отдельного узла из пакета, узлом может быть как Python скрипт, так и C++ программа; вызов имеет следующее описание:  
`rosrun [pkg_name] [node_name] [additional args]`
---
## Основные инструменты
Для начала можно проверить существующие команды утилиты анализа узлов

```bash
rosnode help

rosnode is a command-line tool for printing information about ROS Nodes.

Commands:
	rosnode ping	test connectivity to node
	rosnode list	list active nodes
	rosnode info	print information about node
	rosnode machine	list nodes running on a particular machine or list machines
	rosnode kill	kill a running node
	rosnode cleanup	purge registration information of unreachable nodes

Type rosnode <command> -h for more detailed usage, e.g. 'rosnode ping -h'
```

Посмотрим список узлов в системе

```bash
rosnode list
```
Также можно посмотреть информацию о конкретном узле

```bash
rosnode list
```

---
Теперь взглянем на возможности утилиты для анализа топиков
```bash
rostopic help
```

Посмотрим на список топиков в системе
```bash
rostopic list
```
Для вывода в более подробной форме воспользуемся опцией -v
```bash
rostopic list -v
```

Взглянем на информацию о конкретном топике
```bash
rostopic info /chatter
```

Далее можно показать вывод топика. Ctrl+C.

```bash
rostopic echo /chatter
```

> В bash терминале с помощью рассмотренной утилиты попробуйте измерить частоту публикации сообщений в топик. ПОДСКАЗКА: пользоваться help-ом никто не запрещал (= 

---
Также существует утилита `rosmsg`, которая анализирует типы сообщений

Попробуем проверить ее команды

```bash
rosmsg -h
```

А теперь посмотрим на тип сообщения топика /chatter - std_msgs/String
```bash
rosmsg show std_msgs/String
```

В выводе показана начинка прототипа сообщения. Как видно оно содержит единственное поле типа `string`. Таким образом утилита анализирует информацию, связанную именно с сообщениями, а не c самими данными в них.

А теперь посмотрим, какие есть сообщения в системе ROS =)
```bash
rosmsg list
```

Самый базовая группа сообщений - std_msgs, ее типы можно глянуть по [ссылке](http://wiki.ros.org/std_msgs) или командой
```bash
rosmsg package std_msgs
```

## В результате

- Научились запускать мастера.
- Научились запускать узлы с переопределением имени (более подробно об этом далее).
- Научились пользоваться инструментами анализа узлов, топиков и сообщений.

