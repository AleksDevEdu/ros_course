# Начало работы с ROS

## Требования
- Установленный Libux дистрибутив (например [Ubuntu](http://releases.ubuntu.com/16.04/))
- Установленный [ROS Kinetic](http://wiki.ros.org/kinetic/Installation/Ubuntu)
- Базовые знания Unix (при отсутствии - задавайте больше вопросов)
- Готовность к изучению нового и интересного =)

## Подготовка среды ROS

Сначала настроим ROS (подключение системного рабочего пространства) для текущей сессии - открываем терминал и используем общую команду:
```bash
source /opt/ros/[distro]/setup.bash
```
Для нашего случая:
```bash
source /opt/ros/kinetic/setup.bash
```
или
```bash
. /opt/ros/kinetic/setup.bash
```
> Команды `source` и `.` равны =)

Для того, чтобы настраивать ROS автоматически при создании сессий, необходимо прописать
```bash
. /opt/ros/kinetic/setup.bash
```
в конец файла `~/.bashrc`. 

> Он находится в домашней директории и скрыт, так как начинается с точки. Символ `~` - означает (равен) `/home/<пользователь>`, в нашем случае это `/home/user`. 

Можно просто прописать строку в конец файла командой:
```bash
echo ". /opt/ros/kinetic/setup.bash" >> ~/.bashrc
```

> Символ `>>` означает "добавить в конец файла" ("append to the end").
> Команда `echo` выводит строку в терминал, а добавление `>>` переводит этот вывод в конец файла. 

Или открыть файл можно командой:
```bash
subl ~/.bashrc
```
и прописать ручками.

Теперь глобально ROS настроен. Если вы поставили автоматическую настройку - перезапустите терминал (создайте новую сессию - уже с настройкой ROS).

Для проверки того, что ROS настроен, можно вывести значение переменной окружения ROS_DISTRO:
```bash
echo $ROS_DISTRO
```
Значение должно быть `kinetic`.

> Символ '$' читает значение переменной окружения. Без него команда `echo ROS_DISTRO` просто выведет строку `ROS_DISTRO`.

##### > Попробуйте настройть ROS для конкретной сессии (без прописывания в rc-файл), проверьте настройку. После этого создайте новую сессию (новый терминал) и проверьте переменную ROS_DISTRO.
##### > Установите строку в файл и проверьте настройку ROS

## Подготовка рабочего пространства (workspace -> ws)

Так как ROS видит пакеты только в рабочем пространстве, то необходимо создать собственный ws для работы с ним. Можно подглядеть в исходную [исходную инфу на офф сайте](http://wiki.ros.org/catkin/Tutorials/create_a_workspace), а можно сделать следующие шаги.

Во-первых, создаем папочку, которая будет нашим ws. Назовем ее `catkin_ws`:
```bash
mkdir -p ~/catkin_ws/src
```
> Опция `-p` указывает, что нужно создать полный путь, даже если предстоящих папок нет.
В нашем случае папки `catkin_ws` нет, так что создаем весь путь с опцией `-p`. `src` папку внутри надо создавать априори (так регламентирует сборка ROS).

После этого переходим в папку и вызываем утилиту сборки (так можно в первый раз инициализировать ws):
```bash
cd ~/catkin_ws
catkin_make
```

После этого рабочее пространство готово и осталось добавить в файл `~/.bashrc` строку для автоматической настройки ROS на подключение нашего ws:
```bash
. ~/catkin_ws/devel/setup.bash
```

Сделать это можно как ранее:
```bash
echo ". ~/catkin_ws/devel/setup.bash" >> ~/.bashrc
```
или открыть файл `~/.bashrc` и прописать ручками.

> Система ROS может видеть только одно рабочее простанство, создание нескольких пространств и добавление в `rc`-файл не даст результата

##### > Создайте рабочее пространство и настройте его на автоматическое подключение ROS экосистеме.

## Проверка установки

После перезапуска терминалов (для настройки сессий) можно проверить установку всех ws
```bash
echo $ROS_PACKAGE_PATH
```
В вывалившемся результате должен находиться путь до созданного рабочего простанства, а также путь до системного рабочего пространства. То есть, строка должна содержать результат похожий на 
```bash
/home/user/catkin_ws/src:/opt/ros/kinetic/share
```

> Часто переменные окружения содержат список путей. А разделителем списка является символ ':'.

Как видно, первый путь является путем до нового ws, а второй - до системного.

##### > Проверьте настройку ROS и подключение ws пользователя

## В результате
- В файле `~/.bashrc` содержится два пути:
```bash
. /opt/ros/kinetic/setup.bash
. ~/catkin_ws/devel/setup.bash
```

Первый настраивает системное рабочее пространство ROS (основная настройка), второй настраивает ROS для поиска пакетов также и в нашем ws.

- Создали папку catkin_ws, в которой после инициализации содержатся три папки: build, devel и src. Это и есть наш ws (workspace - рабочее пространство).

- Научились настраивать ROS для работы.
- Научились настраивать систему на работу с кастомным рабочим пространством (user ws).

Успехов =)
