<?xml version="1.0"?>
<launch>
  <arg name="rtabmap" default="true"/>

  <!-- Start Turtlebot in Gazebo -->
  <include file="$(find study_pkg)/launch/turtlebot_gazebo.launch">
    <!-- Disable GUI -->
    <arg name="gui" value="false"/>
    <!-- Set map to Corridor from turtlebot_gazebo pkg -->
    <arg name="world_file" value="$(find turtlebot_gazebo)/worlds/corridor.world"/>
  </include>

  <!-- Start Rviz with required views -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find study_pkg)/rviz/turtlebot_nav.rviz" />

  <!-- Start mapping node, method is based on <rtabmap> argument -->
  <include unless="$(arg rtabmap)" file="$(find study_pkg)/launch/gmapping.launch"/>
  <include     if="$(arg rtabmap)" file="$(find study_pkg)/launch/rtabmap.launch">
    <arg name="rtabmapviz" value="false"/>
  </include>

  <!-- Whaaat?? -->
  <include file="$(find study_pkg)/launch/move_base.launch"/>
</launch>
